{% include 'menu.html' %}

{% block content %}

<div class="container-xl">
    <h1>Informe Cobros</h1>
    <form method="post" action="{{ url_for('consultar_cobro', usuario=usuario) }}">
        <div class="form-group">
            <label for="fecha_inicio">Fecha de inicio:</label>
            <input type="text" class="form-control" name="fecha_inicio" id="fecha_inicio" required>
        </div>
        <div class="form-group">
            <label for="fecha_fin">Fecha de fin:</label>
            <input type="text" class="form-control" name="fecha_fin" id="fecha_fin" required>
        </div>
        <button type="submit" class="btn btn-primary">Consultar</button>
    </form>
</div>

<div class="container-fluid">
    {% if resultado_procedimiento %}
        <hr>
       <div style="margin-bottom: 20px;">
        <form action="{{ url_for('descargar_informe_cobros') }}" method="POST">
            <button type="submit" class="btn btn-success">
                <i class="bi bi-file-earmark-excel-fill"></i>
            </button>
        </div>
        </form>
        <div class="table-responsive">
            <table class="table table-striped table-responsive" id="tabla_resultados">
                <thead>
                    <tr>
                        {% for key in resultado_procedimiento[0].keys() %}
                            <th>{{ key }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in resultado_procedimiento %}
                        <tr>
                            {% for value in row.values() %}
                                <td>{{ value }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>

<script type="text/javascript">
    $(document).ready( function () {
        $('#tabla_resultados').DataTable();
    });
</script>

{% endblock %}